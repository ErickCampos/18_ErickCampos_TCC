\begin{chapter}{Referencial Teórico}
Este capítulo tem como objetivo apresentar o referencial teórico das ferramentas
mais importantes para o desenvolvimento do dispositivo proposto neste trabalho,
como i) piezoeletricidade; ii) operadores operacionais; iii) Conectores de
áudio; iv) ferramenta de desenvolvimento de placas de circuito impresso; v) captura de sinais
através da interface de áudio do computador; e, finalmente vi) ferramenta para a
emulação dos eventos de clique do \textit{mouse}.

\begin{section}{Piezoeletricidade}

Há certos elementos capazes de converter uma uma grandeza física em outra. Por
exemplo, transformar temperatura em tensão elétrica. Esses elementos são
chamados de transdutores~\cite{william}. Um grande exemplo de transdutor é o
microfone, que é capaz de converter o som, uma onda mecânica, em sinais
elétricos que são amplificados posteriormente por um circuito. %Muitas vezes
%transdutores são chamados de sensores, porém esta denominação não é correta,
%pois, segundo~\cite{usher}, sensor é um dispositivo capaz de medir uma grandeza
%física, como é o caso do termômetro que realiza a medição de temperatura. 

Além disso, há certos transdutores que são capazes de converter mais de uma
grandeza física, como é o caso do transdutor piezoelétrico. Esse transdutor
opera sob o fenômeno físico conhecido como piezoeletricidade e é bastante
utilizado em diversas aplicações. Seu principio de funcionamento é dividido em
efeito piezoelétrico direto e reverso, os quais serão brevemente descritos a
seguir.
  
\begin{subsection}{Efeito Piezoelétrico Direto}

O efeito piezoelétrico direto refere-se a capacidade de um material gerar tensão
elétrica quando submetido a estresses mecânicos como compressão ou
vibração~\cite{jaffe2012piezoelectric}. Muitos aparelhos eletrônicos utilizam
essa propriedade da piezoeletricidade. Por exemplo, piezos são bastantes
utilizados na indústria como uma ferramenta que ajuda a detectar a presença de
objetos em determinadas áreas. Quando há algum objeto sobre uma área desejada,
o peso desse objeto realiza uma força de compressão sobre o material
piezoelétrico, produzindo uma diferença de potencial elétrico. Dessa
forma, uma máquina pode ``perceber'' que há um objeto sobre a área desejada e
pode então realizar a sua função pré-programada. %É importante perceber que o
%piezo converte, nesse caso a força peso causada pela massa do objeto, em uma
%energia elétricacapaz de ser .
  
\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.8\linewidth]{fig/EfeitoPiezoEletricoDireto}
	\caption{Efeito piezoelétrico direto.}
	\label{fig:direto}
	\end{minipage}
\end{figure}

A Figura~\ref{fig:direto} mostra o princípio de funcionamento do efeito
piezoelétrico direto. Um material piezoelétrico --- um cristal de quartzo, por
exemplo --- é posicionado entre duas placas de metal. Para ocorrer a geração de
energia elétrica, é necessário algum tipo de estresse mecânico no material, como
compressão ou vibração. Quando as placas de metal são pressionadas, ocorre uma
diferença de potencial elétrico na superfície das placas como consequência do
chamado de efeito piezoelétrico direto.  É possível inclusice armazenar a
energia gerada pela compressão do material piezoelétrico e utilizá-la para
alimentar circuitos elétricos, ao invés de usar baterias~\cite{twitter}. 

\end{subsection}


\begin{subsection}{Efeito Piezoelétrico Reverso}

A Figura~\ref{fig:reverso} ilustra o princípio de funcionamento do efeito
piezoelétrico reverso, processo contrário ao efeito piezoelétrico direto. Dado
duas placas de metal separadas por um material piezoelétrico, é possível gerar
perturbações mecânicas nessas placas. Para isso, é necessário aplicar uma
diferença de potencial elétrico nas placas que vibram proporcionalmente a tensão
aplicada~\cite{Lin12}. Ondas de sons audíveis podem ser geradas a partir das
vibrações das placas de metal, mas para que isso ocorra, as placas devem
necessariamente vibrar em uma faixa de frequência entre 20~Hz e 20~kHz (faixa de
frequência audível ao ser humano).


\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.8\linewidth]{fig/EfeitoPiezoEletricoReverso}
	\caption{Efeito piezoelétrico reverso.}
	\label{fig:reverso}
	\end{minipage}
\end{figure}

Muitos aparelhos eletrônicos utilizam o efeito piezoelétrico reverso. Os sons de
sinalizações emitidos por computadores ao serem ligados (\textit{beeps}) ou
quando há algum tipo de problema no funcionamento no computador, são gerados por
um dispositivo chamado \textit{buzzer}, o qual é um bom exemplo de utilização do
efeito piezoelétrico reverso.  Até mesmo alguns sonares utilizam o princípio
desse fenômeno da piezoeletricidade, onde é aplicado uma tensão modulada por PWM
(do inglês \textit{pulse with modulation}) em um material piezoelétrico que
emite um sinal ultrassom. Alguns desses instrumentos ultrassônicos são
utilizados na área médica na realização de cortes em cirurgias, como a
maxilofacial onde é necessário realizar cortes em tecidos
ósseos~\cite{Carvalho17}. 
 
\end{subsection}

\end{section}

\begin{section}{Amplificadores Operacionais} 

O circuito eletrônico conhecido como amplificador operacional é um componente
muito importante em circuitos elétricos que realiza operações especiais de
processamento de sinais~\cite{Richard2000}. 

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.55\linewidth]{fig/opamp}
	\caption{Representação de um amplificador operacional.}
	\label{fig:opamp}
	\end{minipage}
\end{figure}

O amplificador operacional ilustrado na Figura~\ref{fig:opamp} possui dois
terminais de alimentação, duas entradas, inversora e não inversora ($V_{-}$ e
$V_{+}$), e uma saída. A entrada não inversora é convencionalmente representada
pelo símbolo ``+'' e a entrada inversora é representada pelo símbolo ``-''.
Quando um sinal é aplicado na entrada não inversora, o sinal na saída possui a
mesma fase do sinal de entrada. Por outro lado, quando o sinal é aplicado na
entrada inversora, o sinal de saída possui uma fase contrária ao sinal de
entrada. É importante ressaltar que alguns autores omitem a representação dos
terminais de alimentação por considerarem desnecessários e tenderem a
sobrecarregar visualmente os esquemas de circuitos, tornando-os mais difíceis de
serem interpretados. Contudo fica subentendido que os terminais de alimentação
fazem parte do circuito, embora muitas vezes não sejam mostrados.

A partir de várias combinações de resistores nos terminais do amplificador
operacional, é possível executar funções muito úteis com os sinais de entrada, 
como multiplicação por um fator constante, soma, mudança de fase e
subtração~\cite{Nilson09}. Outra função bastante importante que pode ser
implementada com amplificadores operacionais é a comparação de sinais. Dado dois
sinais, um em cada entrada, a saída é determinada a partir de uma comparação de
intensidade entre os dois sinais de entrada~\cite{Terrell96}.  
 

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.55\linewidth]{fig/nao_inversor}
	\caption{Circuito comparador não inversor.}
	\label{fig:comparador1}
	\end{minipage}
\end{figure}

A Figura~\ref{fig:comparador1} mostra um comparador de tensão utilizando a
configuração não inversora. Nessa configuração de comparação, uma tensão como
referência ($V_{Ref}$) é utilizada na entrada inversora. A
Figura~\ref{fig:sinal1} mostra o comportamento dos sinais utilizando essa
configuração.

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.55\linewidth]{fig/comparador_nao_inversor}
	\caption{Comportamento do sinal de saída do comparador não inversor.}
	\label{fig:sinal1}
	\end{minipage}
\end{figure}

Enquanto a tensão de referência for maior que o sinal da entrada não inversora
($V_{In}$), a saída ($V_{Out}$) tende para 0~V. Contudo, quando a tensão da
entrada não inversora é maior que a tensão de referência, a saída  tende para a
magnitude da tensão utilizada como alimentação do amplificador operacional
($V_{cc}$). Por exemplo, se o amplificador for alimentado com 15~V a saída desse
componente se aproximaria de 15~V, porém nunca chegaria a essa magnitude de
tensão. Idealmente, o valor de saída deveria ser exatamente 15~V, porém na
prática isso não acontece devido a diversos fatores físicos do componente.

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.5\linewidth]{fig/inversor}
	\caption{Circuito comparador não inversor.}
	\label{fig:comparador2}
	\end{minipage}
\end{figure}
\break
Já a Figura~\ref{fig:comparador2} mostra um comparador de tensão utilizando a
configuração inversora. Nessa configuração, também é utilizada uma tensão de
refêrencia, porém é colocada na entrada não inversora. O comportamento dos sinais
utilizando a configuração inversora é mostrado na Figura~\ref{fig:sinal2}. 


\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.55\linewidth]{fig/comparador_inversor}
	\caption{Comportamento do sinal de saída do comparador inversor.}
	\label{fig:sinal2}
	\end{minipage}
\end{figure}

A configuração de comparador inversor ocorre, como o próprio nome sugere, um
comportamento oposto ao comparador não inversor. Enquanto a tensão de referência
é maior que a tensão da entrada, a saída tende para a magnitude da tensão de
alimentação do operador operacional. Já quando ocorre o contrário,  a tensão da
saída tende para 0~V.

\end{section}


\begin{section}{Conectores de Áudio TS e TRS}

Sinais de áudio podem ser transmitidos através de vários tipos de conectores.
Por exemplo, é possível reproduzir os sinais de áudio produzidos por uma
guitarra para uma caixa acústica amplificada. Geralmente, utiliza-se o conector
P10 para realizar a transmissão de áudio da guitarra para a caixa acústica. Já
para fones de ouvidos, o conector P2 é mais comumente utilizado. Segundo uma
matéria disponível na BBC News~\cite{BBC}, o conector P2 é utilizado desde o
século XIX, mas nessa época eram mais utilizados para conectar e desconectar 
conexões em painés telefônicos antigos. Os conectores mais utilizados são os 
conectores TS e TRS, também conhecidos como conectores Jack, que serão 
brevemente descritos a seguir.  
\newpage
O TS é um conector utilizado para transmitir sinais analógicos e são mais
utilizados natransmissão de áudio. Esse conector é chamado de TS por ser as
iniciais das palavras Tip e Sleeve. Há diversos tamanhos de
conectores TS e são comercializados com diferentes diâmetros, como 2,5~mm,
3,5~mm e 6,35~mm. A Figura~\ref{fig:ts} mostra a ilustração de um conector TS.
Esse conector possui somente um canal de transmissão de sinal analógico, por
isso é um conector mono~\cite{ts}. O TS possui dois pinos que são separados
entre si por um anel isolante. O pino Tip que  fica localizado no final do
conector é utilizado para realizar a  transmissão do sinal. Já o pino Sleeve é
responsável por ser a referência (GND, \textit{ground}, ou terra) do conector.


O TRS, mostrado na Figura~\ref{fig:trs}, também é um conector utilizado para
transmissão de sinais analógicos. Esse conector às vezes é chamado de P3, por
possuir três pinos, porém este nome está tecnicamente incorreto pois a
nomenclatura é denominada de acordo com o diâmetro de cada conector. Sendo assim
a nomenclatura P2, por exemplo, podendo ser tanto TS quanto TRS,  refere-se a
conectores com diâmetro de 3,5~mm, assim como P10 refere-se a conectores de
6,35~mm. 

%\begin{figure}[!h]
%	\centering
%	\begin{minipage}[c]{\textwidth}
%	\centering
%	\includegraphics[width=0.9\linewidth]{fig/trs}
%	\caption{Conector TRS.}
%	\label{fig:TRS}
%	\end{minipage}
%\end{figure} 

\begin{figure}
\centering
\begin{subfigure}{.4\textwidth}
  \centering
  \includegraphics[width=1\linewidth, height=0.2\textheight]{fig/ts}
  \caption{Conector TS.}
  \label{fig:ts}
\end{subfigure}%
\begin{subfigure}{0.4\textwidth}
  \centering
  \includegraphics[width=1\linewidth, height=0.2\textheight]{fig/trs}
  \caption{Conector TRS.}
  \label{fig:trs}
\end{subfigure}
\caption{Conectores de áudio.}
\label{fig:conector}
\end{figure}

O conector TRS possui três pinos que, assim como o TS, são separados 
entres si por anéis isolantes. Contudo, o TRS pode transmitir dois sinais
analógicos simultaneamente, sendo, portanto, um conector estéreo~\cite{ts}. O
pino Sleeve, ou GND, é a referência do conector. O pino Ring, também chamado de
Right (canal direito da transmissão) é o  pino central do conector. Já Tip,
pino localizado no final do conector, também é conhecido por Left, pois é 
responsável por transmitir um sinal pelo canal esquerdo.

\break 
É possível transformar um conector TRS em TS, ou seja, transformar um conector
estéreo em mono. Para isso, é necessário realizar um curto-circuito entre os
pinos Ring e Tip do conector estéreo. Quando um sinal é enviado para o Ring e
Tip, como eles estão curto circuitados, os dois canais transmitem o mesmo
sinal em somente um canal, agindo como um conector TS.


\end{section}


\begin{section}{Ferramentas de Desenvolvimento de Placas de Circuito Impresso}

Para o desenvolvimento de placas de circuito impresso (PCB, do inglês
\textit{printed circuit board}), primeiramente é
preciso desenvolver o \textit{layout} do circuito que deseja-se transferir
para a placa. Para realizar essa tarefa é necessário a utilização de um
\textit{software} EDA (do inglês, \textit{electronic design automation}). O
Eagle~\cite{eagle} é um dos \textit{software} EDA mais utilizados para o
desenvolvimento de placas de circuito impresso, contudo possui a desvantagem de
não ser um \textit{software} livre, sendo liberado gratuitamente apenas para uso
pessoal e não comercial. Além disso, a versão gratuita possui uma quantidade
limitada de ferramentas de desenvolvimento. Para ter acesso a essas ferramentas,
o desenvolvedor tem que adquirir uma assinatura que pode ser mensal ou anual. Os
valores dessa assinatura variam de R\$~52,91 a
R\$~3.227,40~\cite{EagleAssinatura}. 
 
No entanto, existem ferramentas EDA que são de código aberto e totalmente
gratuitas. O Kicad~\cite{kicad} é o  \textit{software} de código aberto e
gratuito mais utilizado entre os desenvolvedores. Essa ferramenta oferece
recursos necessários para o desenvolvimento de quase todo tipo de projeto.
Obviamente, devido à vasta quantidade de componentes eletrônicos existentes no
mundo, não existem bibliotecas para todos os componentes possíveis. Contudo, há
a possibilidade de desenvolvimento de bibliotecas próprias, sendo possível
disponibilizá-las em repositórios gratuitos, como o GitHub~\cite{github}, para
que qualquer pessoa possa utilizá-la em projetos pessoais.  
\end{section}


\begin{section}{Captura de Áudio}

Para o desenvolvimento de uma aplicação de captura ou reprodução de áudio é
imprescindível a utilização de alguma API. Uma API (do inglês,
\textit{application programing interface}) é uma interface que define o contrato
para que duas aplicações se comuniquem entre si~\cite{API17}. A utilização de
uma API pode simplificar o desenvolvimento de aplicações, contudo há algumas
limitações, como linguagem e plataforma utilizada. 

Existem várias APIs para o desenvolvimento de aplicações de áudio. Agumas APIs são
nativas do sistema operacional, portanto cada sistema operacional possui APIs
específicas. A grande desvantagem de utilizar APIs nativas de um determinado
sistema operacional é questão da protabibidade. Para a utilização da mesma aplicação em outro sistema
operacional, é necessário a reescrita do código utilizando um API suportada pelo
sistema operacional onde deseja-se executar a aplicação. Isso é um grande
problema, pois reescrever um código praticamente do iníco, uma vez que uma nova
API deve ser utilizada, demanda tempo e muitas vezes recursos finaceiros
adicionais para o desenvolvimento do projeto.


A camada de áudio de sistemas operacionais baseados em Linux, por
exemplo, possui o ALSA~\cite{alsa} e também o OSS~\cite{oss} (mais antigo e
menos utilizado) como
\textit{drivers} que permitem a manipulação de áudios e cada \textit{driver}
possui uma API para o desenvolvimento de aplicações. Uma alternativa para ajudar
a portabilidade da aplicação de áudio desenvolvida é utilizar APIs
multiplataformas.

Uma ferramenta bastante utilizada para o desenvolvimento de aplicações que
realizam manipulações de áudio é o PortAudio~\cite{portaudio}, uma biblioteca de
código aberto, multiplataforma, que permite escrever programas em C/C++ para
realizar gravação e reprodução de áudios. A Figura~\ref{fig:portaudio} mostra a
arquitetura do PortAudio para sistemas Linux e Windows.

~

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.75\linewidth]{fig/portaudio}
	\caption{Arquitetura do PortAudio.}
	\label{fig:portaudio}
	\end{minipage}
\end{figure} 

O PortAudio possui suporte para maioria das APIs nativas de cada sistema
operacional. A grande vantagem de utilizar essa ferramenta é que não é
necessário aprender cada API nativa dos sistemas operacionais. Dessa forma é
possível utilizar o mesmo código em diferentes sistemas operacionais,
facilitando a portabilidade do \textit{software} desenvolvido.

A desvantagem de utilizar o PortAudio é que essa ferramenta não fornece total
suporte para toas as funcionalidades de cada API nativa. Por exemplo, o PortAudio não
fornece conversão de taxa de amostragem se for solicitado uma taxa de amostragem
que não seja suportada pela API de áudio nativa. Outro bom exemplo é que o ASIO
SDK permite apenas que uma aplicação seja executada por vez, dessa forma o
PortAudio, atualmente, não suporta a execução de várias aplicações
simultaneamente~\cite{portaudio}.

\end{section}

\begin{section}{X Window System}

O X Window System, também conhecido como X ou X11, é um sistema de janelas
criados pela MIT. Esse sistema atualmente está na sua décima primeira versão
(por isso é também chamado de X11), publicada em 1987. O X11 também é um
protocolo que funciona no modelo cliente-servidor e é utilizado como padrão para
GUIs (do inglês, \textit{graphical user interface}) em sistemas baseados em UNIX
e Linux. Uma visão geral da arquitetura do X Window System é mostrado na
FIgura~\ref{fig:x11}.

\begin{figure}[!h]
	\centering
	\begin{minipage}[c]{\textwidth}
	\centering
	\includegraphics[width=0.6\linewidth]{fig/X11}
	\caption{Arquitetura do modelo cliente-servidor do X11.}
	\label{fig:x11}
	\end{minipage}
\end{figure} 

O servidor X é executado em computadores com telas de bitmap. O servidor
distribui a entrada do usuário e aceita pedidos de saída de vários programas
cliente através de uma variedade de diferentes canais de comunicação entre
processos~\cite{suse}. É possível criar diversas aplicações utilizando o X11,
como criação de interfaces gráficas para usuários e execução dos movimentos e
eventos de clique do \textit{mouse}. 

As aplicações funcionam como cliente e são desenvolvidas utilizando 
principalmente a API Xlib~\cite{xlib}, uma biblioteca cliente do protocolo X escrita
em C. A Xlib realiza o intermédio entre o cliente (aplicação) e o servidor X.  
\end{section}

\end{chapter}
